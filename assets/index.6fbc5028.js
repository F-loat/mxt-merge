var e=Object.defineProperty,t=Object.prototype.hasOwnProperty,a=Object.getOwnPropertySymbols,n=Object.prototype.propertyIsEnumerable,r=(t,a,n)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[a]=n,s=(e,s)=>{for(var l in s||(s={}))t.call(s,l)&&r(e,l,s[l]);if(a)for(var l of a(s))n.call(s,l)&&r(e,l,s[l]);return e};import{d as l,r as o,F as i,c,a as p,b as u,e as m,f as d,w as f,p as v,g as b,o as g,t as y,h,i as w}from"./vendor.20dd4f48.js";!function(e=".",t="__import__"){try{self[t]=new Function("u","return import(u)")}catch(a){const n=new URL(e,location),r=e=>{URL.revokeObjectURL(e.src),e.remove()};self[t]=e=>new Promise(((a,s)=>{const l=new URL(e,n);if(self[t].moduleMap[l])return a(self[t].moduleMap[l]);const o=new Blob([`import * as m from '${l}';`,`${t}.moduleMap['${l}']=m;`],{type:"text/javascript"}),i=Object.assign(document.createElement("script"),{type:"module",src:URL.createObjectURL(o),onerror(){s(new Error(`Failed to import: ${e}`)),r(i)},onload(){a(self[t].moduleMap[l]),r(i)}});document.head.appendChild(i)})),self[t].moduleMap={}}}("/mxt-merge/assets/");const F=(e,t)=>new Promise((a=>{const n=new FileReader;n.onload=e=>{var t,n;a((null==(n=null==(t=null==e?void 0:e.target)?void 0:t.result)?void 0:n.toString())||"")},n.readAsText(e,t)}));var O=l({setup(){const e=o([]);return{dropFile:async t=>{var a;const n=null==(a=null==t?void 0:t.target)?void 0:a.files;for(let r=0;r<n.length;r+=1){const t=await F(n[r],"gb2312"),a=n[r].name.replace(/.*\./,""),s=n[r].name.replace(`.${a}`,"");e.value[r]={raw:n[r],source:t,format:a,name:s}}},exportFile:()=>{const t=e.value[0],a=JSON.stringify((e=>e.reduce(((e,t)=>(t.source.split("\r\n").reduce(((t,a)=>(a.match(/^柱子名称.*/)?e.push({name:a.split("\t")[1],title:[],data:[]}):a.match(/^峰.*/)?e[e.length-1].title=a.split("\t").map((e=>e.trim())):e[e.length-1].data.push(a.split("\t").reduce(((t,a,n)=>{const{title:r}=e[e.length-1];return r?s(s({},t),{[r[n]]:a}):t}),{})),e)),[]),e)),[]).reduce(((e,t)=>(t.data.forEach((a=>{const n=parseInt(a["保留时间"]),r={name:t.name,data:a};e[n]?e[n].push(r):e[n]=[r]})),e)),[]).filter(Boolean))(e.value),null,2);console.log(a);const n=new Blob([a],{type:"text/plain;charset=gb2312"});i.saveAs(n,`${t.name}_merged.${t.format}`)},files:e}}});const j=f();v("data-v-3a5b0f11");const x={class:"wrapper"},M={class:"nes-btns"},R={class:"nes-btn"},$=p("span",null,"选择文件",-1),_={class:"lists"},L={class:"nes-list is-disc"};b();const U=j(((e,t,a,n,r,s)=>(g(),c("div",x,[p("div",M,[p("label",R,[$,p("input",{type:"file",multiple:"",ref:"input",onInput:t[1]||(t[1]=(...t)=>e.dropFile&&e.dropFile(...t))},null,544)]),e.files.length?(g(),c("button",{key:0,type:"button",class:"nes-btn is-primary",onClick:t[2]||(t[2]=(...t)=>e.exportFile&&e.exportFile(...t))}," 导出文件 ")):u("",!0)]),p("div",_,[p("ul",L,[(g(!0),c(m,null,d(e.files,(e=>(g(),c("li",{key:e.name},y(e.name)+"."+y(e.format),1)))),128))])])]))));O.render=U,O.__scopeId="data-v-3a5b0f11";var P=l({name:"App",components:{MxtMerge:O}});P.render=function(e,t,a,n,r,s){const l=h("mxt-merge");return g(),c(l)},w(P).mount("#app");
